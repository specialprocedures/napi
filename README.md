# napi - NewsAPI CLI Tool

A command-line interface for pulling data from NewsAPI.ai endpoints. It's designed to be used in conjunction with NewsAPI.ai's sandbox: simply log in, build a query in the sandbox, save the query json and run it from the CLI to get your results.

## Installation

### From Source
```bash
git clone https://github.com/specialprocedures/napi.git
cd napi
pip install -e .
```

## Usage

### Basic Usage
```bash
napi pull query.json output.json --api_key YOUR_API_KEY
```

### Using Environment Variables
Set your API key as an environment variable:
```bash
export NEWSAPI_API_KEY=your_api_key_here
napi pull query.json output.json
```

### Using .env File
Create a `.env` file in your working directory:
```
NEWSAPI_API_KEY=your_api_key_here
```

Then run:
```bash
napi pull query.json output.json
```

## Query File Format

The query file should be in JSON format as generated by the NewsAPI sandbox. Example:

```json
{
    "query": {
        "$query": {
            "$and": [
                {
                    "conceptUri": "http://en.wikipedia.org/wiki/Gaza"
                },
                {
                    "dateStart": "2023-08-06",
                    "dateEnd": "2025-10-07",
                    "lang": "eng"
                }
            ]
        }
    },
    "resultType": "articles",
    "articlesSortBy": "date"
}
```

## API Key Management

The tool looks for API keys in the following order:
1. `--api_key` command line argument
2. `NEWSAPI_API_KEY` environment variable
3. `NEWSAPI_API_KEY` in a `.env` file

## Development

### Setting up for Development
```bash
git clone https://github.com/yourusername/napi.git
cd napi
pip install -e .
```

### Running Tests
```bash
python -m pytest tests/
```

## Statement on the use of AI
I've used some variation on this very simple code in numerous projects over the past few years. Given how frequently I need to download from [NewsAPI](newsapi.ai), I figured I'd wrap it up in a cli and publish it for others to use.

The initial core functions, i.e., those retrieving the request response, were written by me. I then used Copilot (and Claude Sonnet 4) to:
- Wrap the functions for cli use with argparse
- Bootstrap tests, docs and project scaffolding
- Start getting things ready for publication to PyPI (forthcoming)

## License

MIT License - see LICENSE file for details.
